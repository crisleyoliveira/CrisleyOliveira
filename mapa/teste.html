<!DOCTYPE html>
<html lang='en'>

<head>
    <!-- META -->
    <meta charset='utf-8' />
    <meta name='viewport' content='initial-scale=1, maximum-scale=1, user-scalable=no' />
    <meta name="format-detection" content="telephone=no">

    <!-- TITLE -->
    <title>Lisboa</title>

    <!-- STYLE SHEETS -->
    <link href='https://fonts.googleapis.com/css?family=Space+Grotesk:300,400,600' rel='stylesheet'>
    <link rel='stylesheet' href='style.css' type='text/css' />
    <link rel='stylesheet' href='d3.slider.css' type='text/css' />

 

</head>

<body>
    <!-- HEADER -->
    <div id='header'>
        <!-- HEADER/TITLE -->
        <div id='title'>
            <span class='desktop'>Lisboa&nbsp;Airbnb&nbsp;Explorer</span>
        </div>
    </div>

    <!-- MB Map -->
    <div id='map'></div>
</body>





   <!-- D3 -->


   <!-- MapBox GL JS -->
   <script src='https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.js'></script>
   <link href='https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css' rel='stylesheet' />

   <!-- Turf.js -->


   <script>
       mapboxgl.accessToken = 'pk.eyJ1IjoiY3Jpc2xleW5vIiwiYSI6ImNsanZqc3V5czE3emYzdG4wdnl5emRkOGsifQ.1npueBKtBTbhxx7Wyko1Mw';

       var map = new mapboxgl.Map({
           container: 'map',
           style: 'mapbox://styles/mapbox/dark-v10',
           center: [-9.1393, 38.7223], // Coordenadas de Lisboa
           zoom: 12,
           pitch: 60, // Ajuste o valor para definir a inclinação 3D adequada
           bearing: 20,
           antialias: true
       });

       // Função para carregar e processar o GeoJSON
       function loadData() {
           fetch('lisboa.geojson')
               .then(response => response.json())
               .then(data => addLayerToMap(data));
       }

       // Função para adicionar a camada ao mapa
       function addLayerToMap(data) {
           map.on('load', function () {
               map.addSource('airbnbData', {
                   type: 'geojson',
                   data: data
               });

               map.addLayer({
                   id: 'extrusion',
                   type: 'fill-extrusion',
                   source: 'airbnbData',
                   paint: {
                       'fill-extrusion-color': ['interpolate', ['linear'], ['get', 'price'], 0, 'rgb(0, 255, 0)', 1000, 'rgb(255, 0, 0)'],
                       'fill-extrusion-height': ['get', 'price'],
                       'fill-extrusion-base': 0,
                       'fill-extrusion-opacity': 0.8,
                       'fill-extrusion-vertical-gradient': true
                   }
               });
           });
       }

       loadData();
   </script>
</html>
